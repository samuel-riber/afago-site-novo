<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFAGO - Donuts & Confeitaria</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Playfair+Display:wght@700&display=swap');
        
        body { font-family: 'Montserrat', sans-serif; }
        .font-serif { font-family: 'Playfair Display', serif; }
        
        .no-select {
          user-select: none;
          -webkit-user-drag: none;
        }
        
        .watermark-overlay {
          background: repeating-linear-gradient(
            45deg,
            rgba(255, 183, 73, 0.05) 0,
            rgba(255, 183, 73, 0.05) 20px,
            transparent 20px,
            transparent 40px
          );
          pointer-events: none;
        }

        .animate-fade-in {
          animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Cores customizadas baseadas nas constantes */
        .bg-primary { background-color: #ffb749; }
        .text-primary { color: #ffb749; }
        .border-primary { border-color: #ffb749; }
        .bg-whatsapp { background-color: #25D366; }
        .bg-accent { background-color: #75ff53; }
        .bg-secondary { background-color: #1bcbe9; }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-white antialiased">

    <!-- VIEW: ENTRY -->
    <div id="view-entry" class="min-h-screen flex flex-col bg-white relative overflow-hidden">
        <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-[#ffb749]/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-[#1bcbe9]/10 rounded-full blur-3xl"></div>

        <div class="flex-1 flex flex-col items-center pt-16 z-10">
            <header class="flex flex-col items-center mb-12">
                <div class="relative mb-4">
                    <div class="absolute inset-0 bg-white/20 backdrop-blur-md rounded-full -m-4"></div>
                    <div class="w-32 h-32 rounded-full border-4 border-[#ffb749] overflow-hidden bg-white shadow-xl relative z-10 flex items-center justify-center">
                        <img src="img/logo afago.png" alt="AFAGO Logo" class="w-full h-full object-contain">
                    </div>
                </div>
                <h1 class="text-2xl font-bold tracking-wider text-gray-800 uppercase">DONUTS AFAGO</h1>
            </header>

            <main class="flex flex-col items-center justify-center gap-8 px-4 py-10 max-w-md w-full">
                <button onclick="changeView('store')" class="w-full py-6 text-xl font-bold tracking-widest text-white rounded-2xl shadow-lg hover:scale-105 active:scale-95 transition-all flex items-center justify-center relative px-12 bg-primary">
                    <svg class="w-7 h-7 fill-white absolute left-6" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    AFAGO.COM
                </button>
                
                <a href="https://wa.me/5587991342385" target="_blank" rel="noopener noreferrer" class="w-full py-6 text-xl font-bold tracking-widest text-white rounded-2xl shadow-lg hover:scale-105 active:scale-95 transition-all flex items-center justify-center relative px-12 bg-whatsapp">
                    <svg class="w-7 h-7 fill-white absolute left-6" viewBox="0 0 24 24">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                    WHATSAPP
                </a>
            </main>
        </div>

        <div id="footer-container-entry"></div>
    </div>

    <!-- VIEW: STORE -->
    <div id="view-store" class="hidden min-h-screen bg-gray-50 flex flex-col">
        <!-- Navigation Desktop -->
        <nav class="sticky top-0 z-40 bg-white shadow-sm border-b border-gray-100 h-20">
            <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <button onclick="changeSection('HOME')" class="w-14 h-14 rounded-full border-2 border-primary overflow-hidden flex items-center justify-center bg-white hover:scale-105 transition p-1">
                        <img src="img/logo afago.png" alt="Logo" class="w-full h-full object-contain">
                    </button>
                    <span class="md:hidden font-bold text-gray-800 tracking-tight text-lg uppercase">DONUTS AFAGO</span>
                    
                    <div class="hidden md:flex items-center gap-6 font-bold text-gray-600">
                        <button id="nav-home" onclick="changeSection('HOME')" class="hover:text-primary transition text-primary">Início</button>
                        <button id="nav-work" onclick="changeSection('WORK')" class="hover:text-primary transition">Nosso Trabalho</button>
                        <button id="nav-products" onclick="changeSection('PRODUCTS')" class="hover:text-primary transition">Cardápio</button>
                        <button id="nav-templates" onclick="changeSection('TEMPLATES')" class="hover:text-primary transition">Templetes</button>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <div id="user-display" class="hidden flex items-center gap-3">
                        <span id="user-name-span" class="text-sm font-bold text-gray-700"></span>
                        <button onclick="resetIdentity()" class="bg-gray-100 px-3 py-1 rounded text-[10px] font-bold text-gray-400 hover:bg-gray-200 uppercase">Alterar</button>
                    </div>
                </div>
            </div>
        </nav>

        <main id="main-content" class="flex-1 pb-20 md:pb-0">
            <!-- Sections rendered here dynamically -->
        </main>

        <div id="footer-container-store"></div>
        
        <!-- WhatsApp Fixed Button -->
        <a href="https://wa.me/5587991342385" target="_blank" rel="noopener noreferrer" class="fixed bottom-24 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform flex items-center justify-center md:bottom-6">
            <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
        </a>

        <!-- Mobile Bottom Nav -->
        <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg border-t border-gray-100 px-6 py-3 z-50 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]">
            <div class="flex justify-between items-center">
                <button onclick="changeSection('HOME')" id="mobile-nav-HOME" class="flex flex-col items-center gap-1 transition-all text-primary scale-110">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                    <span class="text-[10px] font-bold uppercase tracking-tighter">Início</span>
                </button>
                <button onclick="changeSection('WORK')" id="mobile-nav-WORK" class="flex flex-col items-center gap-1 transition-all text-gray-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    <span class="text-[10px] font-bold uppercase tracking-tighter">Trabalho</span>
                </button>
                <button onclick="changeSection('PRODUCTS')" id="mobile-nav-PRODUCTS" class="flex flex-col items-center gap-1 transition-all text-gray-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg>
                    <span class="text-[10px] font-bold uppercase tracking-tighter">Cardápio</span>
                </button>
                <button onclick="changeSection('TEMPLATES')" id="mobile-nav-TEMPLATES" class="flex flex-col items-center gap-1 transition-all text-gray-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/></svg>
                    <span class="text-[10px] font-bold uppercase tracking-tighter">Templetes</span>
                </button>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="modal-identity" class="fixed inset-0 z-[60] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal('modal-identity')"></div>
        <div class="relative bg-white w-full max-w-md rounded-3xl shadow-2xl p-8 overflow-hidden animate-fade-in">
            <div class="absolute top-0 left-0 w-full h-2 bg-primary"></div>
            <h2 class="text-2xl font-bold mb-4 text-center">Como podemos te chamar?</h2>
            <p class="text-gray-500 text-center mb-6 text-sm">Informe seu nome para que possamos iniciar seu atendimento personalizado.</p>
            <form onsubmit="handleIdentitySubmit(event)" class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Seu Nome</label>
                    <input 
                        id="input-name"
                        required
                        autoFocus
                        type="text" 
                        class="w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#ffb749] outline-none transition"
                        placeholder="Digite seu nome aqui..."
                    />
                </div>
                <button type="submit" class="w-full py-4 bg-primary text-white font-bold rounded-xl shadow-lg hover:opacity-90 transition transform active:scale-95">
                    Continuar para o WhatsApp
                </button>
            </form>
        </div>
    </div>

    <script>
        // --- CONSTANTS ---
        const LOGO_URL = 'https://cdn.jsdelivr.net/gh/filipecarneiro/afago-assets@main/logo-afago.png';
        const PHYSICAL_PRODUCTS = [
            { id: 1, name: 'Chocolate Com Granulé', price: 1.80, image: 'img/donutchocolatecomgranulados.jpg', type: 'physical', description: 'Donut artesanal com cobertura de chocolate e Granulé.' },
            { id: 2, name: 'Explosão de Morango', price: 15.90, image: 'https://images.unsplash.com/photo-1551024506-0bccd828d307?q=80&w=400&h=400&auto=format&fit=crop', type: 'physical', description: 'Recheio cremoso de morangos frescos e cobertura de chocolate rosa.' },
            { id: 3, name: 'Choco-Ninho Supremo', price: 18.00, image: 'https://images.unsplash.com/photo-1612240498936-65f5101365d2?q=80&w=400&h=400&auto=format&fit=crop', type: 'physical', description: 'Massa especial recheada com leite ninho e banhada em ganache belga.' },
            { id: 4, name: 'Caramelo Salgado & Nozes', price: 16.50, image: 'img/donutcaramelosalgadoenozes.jpg', type: 'physical', description: 'Topping de caramelo artesanal com flor de sal e nozes crocantes.' }
        ];
        const DIGITAL_TEMPLATES = [
            { id: 101, name: 'Pack Social Media Donuts', price: 49.90, image: 'https://images.unsplash.com/photo-1626785774573-4b799315345d?q=80&w=400&h=400&auto=format&fit=crop', type: 'digital', description: '10 artes editáveis no Canva para o seu negócio de confeitaria.' },
            { id: 102, name: 'Ebook: O Segredo da Massa', price: 29.90, image: 'https://images.unsplash.com/photo-1589998059171-988d887df646?q=80&w=400&h=400&auto=format&fit=crop', type: 'digital', description: 'Guia completo para donuts perfeitos e fofinhos em casa.' },
            { id: 103, name: 'Template Menu Interativo', price: 35.00, image: 'https://images.unsplash.com/photo-1512485800893-b08ec1ea59b1?q=80&w=400&h=400&auto=format&fit=crop', type: 'digital', description: 'Design moderno para cardápio digital via WhatsApp.' },
            { id: 104, name: 'Kit Identidade Visual Sweet', price: 89.00, image: 'https://images.unsplash.com/photo-1561070791-26c11d6996ad?q=80&w=400&h=400&auto=format&fit=crop', type: 'digital', description: 'Logotipos e elementos gráficos para sua marca de doces.' }
        ];
        const WORK_IMAGES = [
            'img/img1.jpg',
            'img/img2.jpg',
            'img/img3.jpg',
            'img/img4.jpg',
            'img/img5.jpg',
            'img/img6.jpg',
            'img/img7.jpg',
            'img/img8.jpg',
        ];

        // --- STATE ---
        let currentView = 'entry';
        let currentSection = 'HOME';
        let userName = localStorage.getItem('afago_userName') || '';
        let pendingProduct = null;

        // --- UI COMPONENTS ---
        const footerHTML = `
            <footer class="bg-[#1a1a1a] text-white py-12 pb-32 md:pb-12">
                <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-[#ffb749]">AFAGO</h3>
                        <p class="text-gray-400">Levando doçura e afeto para o seu dia a dia.</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Links Úteis</h4>
                        <ul class="space-y-2 text-gray-400">
                            <li><a href="#" class="hover:text-white transition">Início</a></li>
                            <li><a href="#" class="hover:text-white transition">Política de Privacidade</a></li>
                            <li><a href="#" class="hover:text-white transition">Termos de Uso</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Contato</h4>
                        <p class="text-gray-400">Ouricuri-PE</p>
                        <p class="text-gray-400">WhatsApp: (87) 99134-2385</p>
                    </div>
                </div>
                <div class="text-center mt-12 pt-8 border-t border-gray-800 text-gray-500 text-sm">
                    &copy; ${new Date().getFullYear()} AFAGO. Todos os direitos reservados.
                </div>
            </footer>
        `;

        function renderFooter() {
            document.getElementById('footer-container-entry').innerHTML = footerHTML;
            document.getElementById('footer-container-store').innerHTML = footerHTML;
        }

        function renderSection() {
            const container = document.getElementById('main-content');
            let content = '';

            switch(currentSection) {
                case 'HOME':
                    content = `
                        <section class="relative min-h-[80vh] flex items-center justify-center text-center px-4 overflow-hidden animate-fade-in">
                            <div class="absolute inset-0 z-0">
                                <img 
                                    src="https://images.unsplash.com/photo-1551024601-bec78aea704b?q=80&w=2000&auto=format&fit=crop" 
                                    alt="Donuts background" 
                                    class="w-full h-full object-cover opacity-30"
                                />
                                <div class="absolute inset-0 bg-gradient-to-b from-white via-transparent to-gray-50"></div>
                            </div>
                            <div class="relative z-10 max-w-3xl">
                                <h1 class="text-5xl md:text-7xl font-serif font-bold text-gray-900 mb-6 leading-tight">
                                    O Abraço mais <span class="text-primary">doce</span> da sua vida.
                                </h1>
                                <p class="text-xl text-gray-600 mb-8 leading-relaxed">
                                    Na AFAGO, cada donut é uma obra de arte feita à mão, com ingredientes selecionados e muito carinho. 
                                    Experimente o sabor da verdadeira confeitaria artesanal.
                                </p>
                                <button 
                                    onclick="changeSection('PRODUCTS')" 
                                    class="inline-block bg-primary text-white px-10 py-4 rounded-full text-lg font-bold shadow-xl hover:scale-105 transition"
                                >
                                    Ver Cardápio
                                </button>
                            </div>
                        </section>
                    `;
                    break;
                case 'WORK':
                    content = `
                        <section class="py-24 max-w-7xl mx-auto px-4 animate-fade-in min-h-[80vh]">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4">Nosso Trabalho</h2>
                                <div class="w-24 h-1 bg-primary mx-auto"></div>
                            </div>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                                ${WORK_IMAGES.map((img, i) => `
                                    <div class="aspect-square rounded-2xl overflow-hidden shadow-lg group">
                                        <img 
                                            src="${img}" 
                                            alt="Trabalho ${i+1}" 
                                            class="w-full h-full object-cover group-hover:scale-110 transition duration-500"
                                        />
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    `;
                    break;
                case 'PRODUCTS':
                    content = `
                        <section class="py-24 max-w-7xl mx-auto px-4 animate-fade-in min-h-[80vh]">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4">Cardápio de Confeitos</h2>
                                <p class="text-gray-500">Prontos para entrega imediata em sua casa.</p>
                                <div class="w-24 h-1 bg-primary mx-auto mt-4"></div>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                                ${PHYSICAL_PRODUCTS.map((product) => `
                                    <div class="bg-white rounded-3xl p-4 shadow-xl hover:shadow-2xl transition-all border border-gray-100 flex flex-col">
                                        <img src="${product.image}" alt="${product.name}" class="w-full aspect-square object-cover rounded-2xl mb-4" />
                                        <h3 class="text-xl font-bold mb-2">${product.name}</h3>
                                        <p class="text-sm text-gray-500 mb-4 flex-grow">${product.description}</p>
                                        <div class="flex items-center justify-between mt-auto pt-4 border-t border-gray-50">
                                            <span class="text-2xl font-bold text-gray-900">R$ ${product.price.toFixed(2)}</span>
                                            <button 
                                                onclick="initPurchase(${product.id}, 'physical')"
                                                class="bg-accent text-gray-900 px-4 py-2 rounded-xl font-bold hover:scale-105 transition active:scale-95"
                                            >
                                                Pedir
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    `;
                    break;
                case 'TEMPLATES':
                    content = `
                        <section class="py-24 max-w-7xl mx-auto px-4 animate-fade-in min-h-[80vh]">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4">Artes Digitais (Templates)</h2>
                                <p class="text-gray-500">Potencialize seu negócio com designs exclusivos.</p>
                                <div class="w-24 h-1 bg-primary mx-auto mt-4"></div>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                                ${DIGITAL_TEMPLATES.map((product) => `
                                    <div class="bg-white rounded-3xl p-4 shadow-xl border border-gray-100 flex flex-col no-select">
                                        <div class="relative rounded-2xl overflow-hidden mb-4 aspect-square">
                                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" />
                                            <div class="watermark-overlay absolute inset-0"></div>
                                            <div class="absolute inset-0 flex items-center justify-center">
                                                <span class="text-white/30 text-4xl font-bold rotate-45 pointer-events-none uppercase">AFAGO</span>
                                            </div>
                                        </div>
                                        <h3 class="text-xl font-bold mb-2">${product.name}</h3>
                                        <p class="text-sm text-gray-500 mb-4 flex-grow">${product.description}</p>
                                        <div class="flex items-center justify-between mt-auto">
                                            <span class="text-2xl font-bold text-gray-900">R$ ${product.price.toFixed(2)}</span>
                                            <button 
                                                onclick="initPurchase(${product.id}, 'digital')"
                                                class="bg-secondary text-white px-4 py-2 rounded-xl font-bold hover:scale-105 transition"
                                            >
                                                Comprar
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    `;
                    break;
            }
            container.innerHTML = content;
        }

        // --- ACTIONS ---
        function changeView(view) {
            currentView = view;
            if(view === 'entry') {
                document.getElementById('view-entry').classList.remove('hidden');
                document.getElementById('view-store').classList.add('hidden');
            } else {
                document.getElementById('view-entry').classList.add('hidden');
                document.getElementById('view-store').classList.remove('hidden');
                renderSection();
                updateAuthUI();
            }
            window.scrollTo(0, 0);
        }

        function changeSection(section) {
            currentSection = section;
            renderSection();
            updateNavUI();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateNavUI() {
            // Desktop
            const sections = ['HOME', 'WORK', 'PRODUCTS', 'TEMPLATES'];
            sections.forEach(s => {
                const btn = document.getElementById(`nav-${s.toLowerCase()}`);
                if(btn) {
                    btn.classList.toggle('text-primary', currentSection === s);
                    btn.classList.toggle('text-gray-600', currentSection !== s);
                }
                
                // Mobile
                const mobBtn = document.getElementById(`mobile-nav-${s}`);
                if(mobBtn) {
                    mobBtn.classList.toggle('text-primary', currentSection === s);
                    mobBtn.classList.toggle('scale-110', currentSection === s);
                    mobBtn.classList.toggle('text-gray-400', currentSection !== s);
                }
            });
        }

        function updateAuthUI() {
            const display = document.getElementById('user-display');
            const span = document.getElementById('user-name-span');
            if(userName) {
                display.classList.remove('hidden');
                span.innerText = `Olá, ${userName}`;
            } else {
                display.classList.add('hidden');
            }
        }

        function resetIdentity() {
            userName = '';
            localStorage.removeItem('afago_userName');
            updateAuthUI();
        }

        function initPurchase(id, type) {
            const products = type === 'physical' ? PHYSICAL_PRODUCTS : DIGITAL_TEMPLATES;
            pendingProduct = products.find(p => p.id === id);
            
            if(!userName) {
                document.getElementById('modal-identity').classList.remove('hidden');
            } else {
                redirectToWhatsApp(userName, pendingProduct);
            }
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
        }

        function handleIdentitySubmit(e) {
            e.preventDefault();
            const name = document.getElementById('input-name').value;
            if(name.trim()) {
                userName = name.trim();
                localStorage.setItem('afago_userName', userName);
                updateAuthUI();
                closeModal('modal-identity');
                if(pendingProduct) {
                    redirectToWhatsApp(userName, pendingProduct);
                }
            }
        }

        function redirectToWhatsApp(name, product) {
            let messageText = '';
            if (product.type === 'digital') {
                messageText = `Olá! Meu nome é ${name} e eu gostaria de comprar o templete ${product.name}.`;
            } else {
                messageText = `Olá! Meu nome é ${name} e eu gostaria de fazer um orçamento do ${product.name}.`;
            }
            const message = encodeURIComponent(messageText);
            window.open(`https://wa.me/5587991342385?text=${message}`, '_blank');
        }

        // --- INITIALIZATION ---
        window.addEventListener('DOMContentLoaded', () => {
            renderFooter();
            updateNavUI();
        });
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>